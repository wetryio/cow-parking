# cow-parking
Citizen Of Wallonia Project

## Devices informations (Obsolete ?)

#### Children Device ID (Obsolete ?)
demoDeviceChildSensorHcSr

PK : VXl+Bgohb7GR6EbY57fKbvIqMRr0Ri1KceHRofiLNT4=
SK : EbClslecBoU6R6AVX/t91f8PuH6TeIqoco9izs7xmzw=
PCS : HostName=CowHub.azure-devices.net;DeviceId=demoDeviceChildSensorHcSr;SharedAccessKey=VXl+Bgohb7GR6EbY57fKbvIqMRr0Ri1KceHRofiLNT4=
SCS : HostName=CowHub.azure-devices.net;DeviceId=demoDeviceChildSensorHcSr;SharedAccessKey=EbClslecBoU6R6AVX/t91f8PuH6TeIqoco9izs7xmzw=


#### Children Device ID (Obsolete ?)
demoDeviceChildLightController

PK : hU6JqUfZhdramuZH5aIVvoD/AT5zObgBRLJfvblkNv8=
SK : JZ7ycOlWTBotweFS/wyeiEOWSfRYz38/7fUaXb5pQBk=
PCS : HostName=CowHub.azure-sevices.net;DeviceId=demoDeviceChildLightController;SharedAccessKey=hU6JqUfZhdramuZH5aIVvoD/AT5zObgBRLJfvblkNv8=
SCS : HostName=CowHub.azure-devices.net;DeviceId=demoDeviceChildLightController;SharedAccessKey=JZ7ycOlWTBotweFS/wyeiEOWSfRYz38/7fUaXb5pQBk=



### HC-SR04

https://thepihut.com/blogs/raspberry-pi-tutorials/hc-sr04-ultrasonic-range-sensor-on-the-raspberry-pi
https://www.emotion-tech.com/imprimante-3d-i3-metalmotion
https://tutorials-raspberrypi.com/raspberry-pi-ultrasonic-sensor-hc-sr04/

### CSharp Lover
https://github.com/unosquare/raspberryio (HC-SR04 Support)


### Iot HUB
https://docs.microsoft.com/en-us/azure/iot-hub/

### Deploy Edge
https://sandervandevelde.wordpress.com/2019/08/16/iot-edge-group-enrollments-using-symmetric-keys/


### Generate config.gz
https://www.raspberrypi.org/forums/viewtopic.php?t=195965

sudo modprobe configs


### Battery level in Raspi
https://github.com/rricharz/pi-top-battery-status



### Orientation IOT EDGE

https://docs.microsoft.com/en-us/azure/iot-edge/tutorial-csharp-module

Un module par sensor / action, cela crée un "genre" api pour les device edge, ex :

[Get]
deviceId/sensor/hc04

[Post]
deviceId/output/light

Possible de lancer un handle qui écoute la distance et envois au hub.

Avantage : 

 - Utilisation du EDGE
 - Utilisation de docker
 - Un module = 1 sensor / Single Responsability
 - 

Inconvénient : 
 - Un peu plus chaud a faire



### Flux (Ma vision)

1) On formate les devices, avec une image type.

2) Au lance du device, celui-ci génére un ID unique et est register dans un groupe "Admin Stock"

3) Quand un projet est crée, la personne peux "commander X" devices

4) A ce moment, le module de provisioning, vas réecrire le yaml de configuration du edge, pour se binder sur les informations du projet 
    a) Un enrollement group est crée pour le projet et celui-ci est utiliser pour les devices

5) Une dois réecris le module reboot

6) Les devices doivent à présent apparaitre dans le Enrollment Group du projet

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="826px" viewBox="-0.5 -0.5 826 921" content="&lt;mxfile host=&quot;www.draw.io&quot; modified=&quot;2020-03-05T06:57:45.302Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&quot; etag=&quot;d6Iq2bjjpLHSBNKa42Hp&quot; version=&quot;12.7.9&quot; type=&quot;onedrive&quot;&gt;&lt;diagram id=&quot;45V5W_btvhDgLGAltDUR&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:921px;"><defs/><g><rect x="15" y="0" width="200" height="490" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 7px; margin-left: 16px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Stock Device Boot</div></div></div></foreignObject><text x="115" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Stock Device Boot</text></switch></g><rect x="35" y="150" width="160" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 190px; margin-left: 36px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Read Device ID  (Board Serial) from /proc/cpuinfo</div></div></div></foreignObject><text x="115" y="194" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Read Device ID  (Board Ser...</text></switch></g><rect x="35" y="280" width="160" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 315px; margin-left: 36px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Register Device to Cow Stock Enrollement Group</div></div></div></foreignObject><text x="115" y="319" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Register Device to Cow Sto...</text></switch></g><rect x="35" y="30" width="160" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 65px; margin-left: 36px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="white-space: normal">PI Startup</span><br style="white-space: normal" /><span style="white-space: normal">Launch custom service</span><br style="white-space: normal" /><span style="white-space: normal">ProvisionningService</span></div></div></div></foreignObject><text x="115" y="69" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PI Startup...</text></switch></g><path d="M 115 100 L 115 143.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 115 148.88 L 111.5 141.88 L 115 143.63 L 118.5 141.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 115 230 L 115 273.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 115 278.88 L 111.5 271.88 L 115 273.63 L 118.5 271.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 115 350 L 115 393.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 115 398.88 L 111.5 391.88 L 115 393.63 L 118.5 391.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="35" y="400" width="160" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 435px; margin-left: 36px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Listen command</div></div></div></foreignObject><text x="115" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Listen command</text></switch></g><path d="M 115 548.63 L 115 476.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 115 553.88 L 111.5 546.88 L 115 548.63 L 118.5 546.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 115 471.12 L 118.5 478.12 L 115 476.37 L 111.5 478.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="555" width="230" height="365" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 562px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Available Commands</div></div></div></foreignObject><text x="115" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Available Commands</text></switch></g><rect x="10" y="600" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 643px; margin-left: 11px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Setup Device<br /></b></font>Initialise device to register to client / project specific enrollement group</div></div></div></foreignObject><text x="115" y="646" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Setup Device...</text></switch></g><rect x="10" y="710" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 753px; margin-left: 11px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Reset Device<br /></b></font>Reset device, register back to Stock Enrollement Group</div></div></div></foreignObject><text x="115" y="756" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Reset Device...</text></switch></g><rect x="10" y="820" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 863px; margin-left: 11px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Test Device<br /></b></font>Test device availibility, sensor and control</div></div></div></foreignObject><text x="115" y="866" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Test Device...</text></switch></g><rect x="350" y="0" width="370" height="490" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 368px; height: 1px; padding-top: 7px; margin-left: 351px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Device Boot (Provide to Client / Project)</div></div></div></foreignObject><text x="535" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Device Boot (Provide to Client / Project)</text></switch></g><rect x="370" y="150" width="160" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 190px; margin-left: 371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Read Device ID  (Board Serial) from /proc/cpuinfo</div></div></div></foreignObject><text x="450" y="194" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Read Device ID  (Board Ser...</text></switch></g><rect x="370" y="30" width="160" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 65px; margin-left: 371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="white-space: normal">PI Startup</span><br style="white-space: normal" /><span style="white-space: normal">Launch custom service</span><br style="white-space: normal" /><span style="white-space: normal">ProvisionningService</span></div></div></div></foreignObject><text x="450" y="69" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PI Startup...</text></switch></g><path d="M 450 100 L 450 143.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 450 148.88 L 446.5 141.88 L 450 143.63 L 453.5 141.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 450 230 L 450 393.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 450 398.88 L 446.5 391.88 L 450 393.63 L 453.5 391.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="370" y="400" width="160" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 435px; margin-left: 371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Listen command</div></div></div></foreignObject><text x="450" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Listen command</text></switch></g><rect x="545" y="400" width="160" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 435px; margin-left: 546px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Send command</div></div></div></foreignObject><text x="625" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Send command</text></switch></g><path d="M 450 230 L 620.43 395.56" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 624.2 399.22 L 616.74 396.85 L 620.43 395.56 L 621.62 391.83 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 450 548.63 L 450 476.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 450 553.88 L 446.5 546.88 L 450 548.63 L 453.5 546.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 450 471.12 L 453.5 478.12 L 450 476.37 L 446.5 478.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="335" y="555" width="230" height="365" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 562px; margin-left: 336px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Available Commands</div></div></div></foreignObject><text x="450" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Available Commands</text></switch></g><rect x="345" y="600" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 643px; margin-left: 346px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Book Device<br /></b></font>Receive a booking query, update light state to orange</div></div></div></foreignObject><text x="450" y="646" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Book Device...</text></switch></g><rect x="345" y="710" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 753px; margin-left: 346px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Release Device<br /></b></font>Device is available, update light state to blue / green</div></div></div></foreignObject><text x="450" y="756" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Release Device...</text></switch></g><rect x="345" y="820" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 863px; margin-left: 346px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Get Battery Level Device<br /></b></font>Get the device battery level</div></div></div></foreignObject><text x="450" y="866" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Get Battery Level Device...</text></switch></g><rect x="595" y="555" width="230" height="260" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 562px; margin-left: 596px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Available Commands</div></div></div></foreignObject><text x="710" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Available Commands</text></switch></g><rect x="605" y="600" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 643px; margin-left: 606px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Device Is Obstructed<br /></b></font>Send a device obstrut state</div></div></div></foreignObject><text x="710" y="646" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Device Is Obstructed...</text></switch></g><rect x="605" y="710" width="210" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 753px; margin-left: 606px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 14px"><b>Battery level state<br /></b></font>Device send every 3 hours, battery level</div></div></div></foreignObject><text x="710" y="756" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Battery level state...</text></switch></g><path d="M 705.5 550.5 L 629.5 474.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 709.21 554.21 L 701.78 551.73 L 705.5 550.5 L 706.73 546.78 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 625.79 470.79 L 633.22 473.27 L 629.5 474.5 L 628.27 478.22 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

## Issue 
### Azure IoT Provionning Profile 
Le client n'existe pas en python, faudras call en REST

https://github.com/Azure/azure-iot-sdk-python

CRUD Operation with X.509 Group Enrollment	✖️	Manages device enrollment using X.509 group enrollment with the service SDK.
